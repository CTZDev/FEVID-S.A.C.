---
import HeaderSection from "../HeaderSection.astro";
import Input from "../../Input.astro";
import TextArea from "../../TextArea.astro";
import HeaderContact from "./HeaderContact.astro";
---

<section class="contact-main" id="contact-us">
  <HeaderSection
    title="¿Cómo contactarnos?"
    contentText=`"Ingresa tu solicitud y procederemos a brindarle más detalles del catálogo de nuestros productos"`
  />

  <div
    class="bg-white rounded-lg shadow-2xl px-6 py-8 max-w-[768px] m-auto flex flex-col gap-6 lg:max-w-[1024px] lg:px-12 lg:py-12 mb-32">
    <HeaderContact
      title="RELLENA EL FORMULARIO"
      text=`“Una vez que tu mensaje sea enviado, será recibido con prioridad por
            nuestro equipo. Te aseguramos una respuesta, en el menor tiempo
            posible.”`
    />

    <form
      action="https://formsubmit.co/carlosteranzavaleta@hotmail.com"
      method="POST"
      target="_blank"
      class="form-body text-sm md:text-base lg:text-lg">
      <Input
        label="Nombres completos"
        key="fullName"
        type="text"
        placeholder="Escribe tus nombres completos"
      />

      <Input
        label="Correo electrónico"
        key="email"
        type="email"
        placeholder="Digita tu correo electrónico"
      />

      <TextArea
        label="Mensaje"
        key="send"
        placeholder="Ingresa los productos que necesitas cotizar y obtener información"
      />

      <button
        type="submit"
        class="btn-form justify-center py-3 flex items-center gap-3 text-sm font-semibold transition-all cursor-pointer w-full md:text-base lg:text-lg">
        <img src="/send.svg" alt="Send form" width="32" height="32" />Enviar
        Formulario
      </button>

      <input
        type="hidden"
        name="_next"
        value="https://fevidsac.netlify.app/contact-response"
      />

      <input type="hidden" name="_captcha" value="false" />
      <input type="hidden" name="_template" value="table" />

      <!-- <input
        type="hidden"
        name="_cc"
        value="fevidsac@hotmail.com, fevidsac@gmail.com"
      /> -->
      <div class="loader hidden"></div>
    </form>
  </div>
</section>

<style lang="scss">
  .btn-form:hover {
    transform: scale(1.02) translateY(-1px);
  }

  .btn-form {
    border-radius: 8px;
    color: black;
    background-color: rgba(255, 191, 96, 1);
    &:hover {
      background-color: rgba(255, 191, 96, 0.8);
    }
  }

  .loader {
    width: 48px;
    height: 48px;
    margin: 2rem auto;
    position: relative;
  }

  .loader:before {
    content: "";
    width: 48px;
    height: 5px;
    background: #ffd9a1;
    position: absolute;
    top: 60px;
    left: 0;
    border-radius: 50%;
    animation: shadow324 0.5s linear infinite;
  }

  .loader:after {
    content: "";
    width: 100%;
    height: 100%;
    background: #ffbf60;
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 4px;
    animation: jump7456 0.5s linear infinite;
  }

  @keyframes jump7456 {
    15% {
      border-bottom-right-radius: 3px;
    }

    25% {
      transform: translateY(9px) rotate(22.5deg);
    }

    50% {
      transform: translateY(18px) scale(1, 0.9) rotate(45deg);
      border-bottom-right-radius: 40px;
    }

    75% {
      transform: translateY(9px) rotate(67.5deg);
    }

    100% {
      transform: translateY(0) rotate(90deg);
    }
  }

  @keyframes shadow324 {
    0%,
    100% {
      transform: scale(1, 1);
    }

    50% {
      transform: scale(1.2, 1);
    }
  }
</style>

<script>
  import ScrollReveal from "scrollreveal";

  ScrollReveal().reveal(".contact-main", {
    distance: "500px",
    duration: 900,
    easing: "ease-in-out",
  });
  const $form = document.querySelector(".form-body");
  const $loader = document.querySelector(".loader");

  // Cargar el submit
  $form?.addEventListener("submit", e => {
    $loader?.classList.remove("hidden");
    setTimeout(() => {
      $loader?.classList.add("hidden");
      ($form as HTMLFormElement).reset();
      scrollTo(0, 0);
    }, 12000);
  });
</script>
